(function(){var c,a,b,d;d=(function(){var k={},j={container:"#online-list",socket_url:"/chat/online",challenge_url:"/game/challenge",template:"online-user"},f=function(l){return{csrf_token:b,target:l,token:a.token}},h,e,i,g;g=function(l){console.log(l)};i=function(){var l=$(this),m=l.data("user");$.post(j.challenge_url,_makeChallengeData(m),g)};k.update=function(n){if(U.type(n)!=="array"){return false}e.html("");var m="";for(var l=0;l<n.length;l++){m+=U.template(j.template,n[l])}e.html(m)};k.init=function(l){U.l("setting up online user list");$.extend(j,l);e=$(j.container);e.on("click","button.challenge",i);h=Socket({url:j.socket_url,token:a.token,events:{update:k.update.bind(k)}});h.open()};return k})();c=function(e,f){U.l("setting up homepage");a=e;b=f;d.init()};Entry(c)})();